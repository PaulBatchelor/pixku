pix_patchwerk
pix_plumber
patchwerk
[
: lfo_freq 0 ;
: biscale_freq 1 ;
: lfo_amp 2 ;
: biscale_amp 3 ;
: sine 4 ;

# plumber stuff

: pd ptr ;
: stream ptr ;
: data stream pd ;
]

44100 plumb_new _pd setptr 
pd plumbstream_new _stream setptr

# 5 alloc_nodes
5 "pw" data sporth

lfo_freq 0 ugen
biscale_freq 1 ugen
lfo_amp 0 ugen
biscale_amp 1 ugen
sine 0 ugen

setup_nodes

lfo_freq 2 biscale_freq 0 connect 
biscale_freq 3 sine 0 connect 

lfo_amp 2 biscale_amp 0 connect
biscale_amp 3 sine 1 connect

4 lfo_freq 0 constant
1 lfo_freq 1 constant

50 lfo_amp 0 constant
1 lfo_amp 1 constant

100 biscale_freq 1 constant
800 biscale_freq 2 constant

-0.8 biscale_amp 1 constant
0.8 biscale_amp 2 constant

sine 2 set_output

"440 0.5 sine" data plumb_parse
data plumb_compile

"test.wav" 10 data plumb_write


patch_cleanup

data plumbstream_free
pd plumb_free
